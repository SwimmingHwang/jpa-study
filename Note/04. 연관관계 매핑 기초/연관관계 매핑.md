# Chapter5. 연관관계 매핑 기초

> 1. 객체와 테이블 연관관계 차이를 이해
> 2. 객체의 참조와 테이블의 외래키를 매핑

### 연관관계가 필요한 이유

- 연관관계 없이 참조 대신에 외래키를 그대로 사용하면

  예시) Memger - Team 

  - 외래키 식별자(team_id)를 직접 다뤄야 함
  - 식별자(team_id)로 Team을 다시 조회 해야 함
  - 이는 객체 지향적인 방법은 아니다
  - 즉, 객체를 테이블에 맞추어 데이터 중심으로 모델링하면, 협력 관계를 만들 수 없다

- 객체와 테이블 연관관계의 차이

  - 객체는 참조를 사용해서 연관 객체를 찾는다
  - 테이블은 외래키 조인을 사용해 연관된 테이블을 찾는다

- 책 추천 : 조영호(객체지향의 사실과 오해)
  "객체지향 설계의 목표는 자율적인 객체들의 협력 공동체를 만드는 것이다"



## 5.1 단방향 연관관계







## 5.2 연관관계 사용





## 5.3 양방향 연관관계

- 객체와 테이블이 관계를 맺는 차이

  - **객체 연관관계** **= 2**개
    - 회원 -> 팀 연관관계 1개(단방향) - 참조
    - 팀 -> 회원 연관관계 1개(단방향) - 참조
  - **테이블 연관관계** **= 1**개
    - 회원 <-> 팀의 연관관계 1개(양방향) - FK

  



## 5.4 연관관계의 주인(Owner)

![img1](/Users/sooyoung/dev/jpa-study/Note/04. 연관관계 매핑 기초/image-20211202073426178.png)

Q. 여기서 FK를 추가하는 쪽은 Member 일까? Team일까?

Q. 여기서 TEAM_ID를 수정하는 쪽은 Member 일까? Team일까?



- 이러한 양방향 매핑에서 FK를 관리하는 쪽이 연관 관계의 주인이며, 연관관계의 주인 만이 외래키를 등록, 수정 할 수 있다. 
- 주인이 아닌쪽은 읽기만 가능
- 주인이 아니면 mappedBy 속성으로 주인을 지정



> **외래키가 있는 곳을 주인으로 정해라**

